# Checklist

## 쿠키란 무엇일까요?

쿠키는 stateless한 HTTP 프로토콜이 stateful하게 정보를 기억할 수 있도록 해주는 작은 데이터 조각입니다. HTTP는 특성상 상태 정보를 유지하지 않기 때문에, 쇼핑몰의 장바구니 같이 사용자에 맞는 데이터를 응답해주기 위해서는 해당 사용자를 식별할 수 있어야 합니다. 쿠키를 사용하면 이러한 상황을 대처할 수 있습니다.

쿠키는 name과 value의 한 쌍으로 이루어져 있습니다. 클라이언트는 최초 통신으로 쿠키를 받고, 이후의 요청부터는 쿠키를 함께 보내게 됩니다. 이때 쿠키의 사이즈는 4kb보다 작아야하고 도메인 당 50개 내외가 한계입니다. 정해진 개수를 초과한 경우에는 오래된 것부터 하나씩 삭제됩니다.

쿠키는 크게 세 가지 용도로 사용됩니다. 첫 째는 앞서 언급한 쇼핑몰의 장바구니 같이, 저장돼 있는 장바구니가 어떤 유저의 것인지 매핑하기 위한 식별자의 용도로 사용합니다. 로깅의 용도로도 사용합니다. 사용자가 웹사이트에 로그인 할 때 웹 서버는 클라이언트에게 고유 식별자를 포함한 쿠키를 보내줍니다. 서버는 해당 식별자를 기억하고 유저가 로그인 사용자 전용 페이지에 접근하는 것을 허락합니다.

두 번째는 개인 맞춤화입니다. 마찬가지로 유저와 관련된 정보를 기억했다가, 해당 유저의 맞춤형 정보를 보여주는 용도로 사용될 수 있습니다. 예를들어서 구글 서치 엔진은 페이지 당 검색 결과를 사용자가 설정해서, 해당 사용자는 검색 결과가 한 페이지 당 몇 개 보이게끔 설정할 수 있습니다.

마지막으로는 추적입니다. 사용자가 웹 브라우저에서 어떤 행동을 하고 얼마나 오래 머물러 있는지를 추적하기 위해 사용합니다. 이런 데이터가 쌓이면 의미 있는 통계로 이어질 수 있고, 이런 통계는 금전적인 가치를 창출할 수 있습니다. 

일반적으로 쿠키는 처음에 웹 서버에서 HTTP의 Set-Cookie 응답 헤더에 담아서 클라이언트로 보냅니다. 그리고 웹 브라우저는 서버로부터 받은 쿠키를 브라우저를 통해 컴퓨터에 저장합니다. 그러고 나서, 매 요청마다 브라우저는 서버에게 해당 쿠키를 다시 보냅니다. 또는 자바스크립트의 XHR 혹은 Fetch API를 이용해서 클라이언트에서 서버 측으로 쿠키를 설정해서 보낼 수도 있습니다. 브라우저가 종료돼도 쿠키에 만료 기간이 설정돼 있다면, 클라이언트 측에서 쿠키에 대한 정보를 보관하고 있습니다.



## 웹 어플리케이션의 세션이란 무엇일까요?

세션은 서버와 클라이언트에 session-id를 저장해서 클라이언트를 식별하는 방법입니다. 서버에서 set-cookie 값으로 session-id를 발행하여 응답합니다.

세션은 기본적으로 쿠키를 기반으로 하고 있지만, 데이터를 브라우저가 아닌 서버 측에서 관리합니다. 그리고 쿠키는 만료 시간을 설정하면 브라우저를 종료해도 남아있지만, 세션은 만료 시간을 설정해도 브라우저 종료시에 삭제 되는 것이 큰 차이입니다. 

이때 클라이언트 사이드에서는 session cookie라는 타입으로 해당 정보를 저장하고, 이 타입의 쿠키는 브라우저 종료시에 삭제돼서, memory cookie 라고도 부릅니다.

세션은 서버의 자원을 사용하기 때문에, 너무 많이 만들면 서버의 메모리를 많이 차지하게 되어서 서버의 속도가 느려질 수 있습니다.